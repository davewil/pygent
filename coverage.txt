.............................................DEBUG: Event received: tool_call
DEBUG: Event received: tool_result
DEBUG: Event received: finished
.DEBUG: Event received: tool_call
DEBUG: Event received: permission_denied
DEBUG: Event received: finished
.DEBUG: Event received: tool_call
DEBUG: Event received: tool_result
DEBUG: Event received: finished
DEBUG: Toggling via action call
DEBUG: App PM override: True
DEBUG: Event received: tool_call
DEBUG: Event received: tool_result
DEBUG: Event received: finished
......................... [ 82%]
...........DEBUG: Event received: text
DEBUG: Event received: tool_call
DEBUG: Event received: tool_result
DEBUG: Event received: finished
....                                                          [100%]
=============================== warnings summary ===============================
tests/test_tools/test_shell.py::test_shell_property_output_handling
  /home/david/Work/Development/python/chapgent/.venv/lib/python3.13/site-packages/_pytest/nodes.py:344: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    return (x[1] for x in self.iter_markers_with_node(name=name))
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.13.11-final-0 _______________

Name                               Stmts   Miss  Cover   Missing
----------------------------------------------------------------
src/chapgent/__init__.py                 0      0   100%
src/chapgent/cli.py                     88      3    97%   37, 76, 168
src/chapgent/config/__init__.py          0      0   100%
src/chapgent/config/loader.py           29      1    97%   8
src/chapgent/config/settings.py         19      0   100%
src/chapgent/core/__init__.py            0      0   100%
src/chapgent/core/agent.py              18      0   100%
src/chapgent/core/loop.py               91      0   100%
src/chapgent/core/mock_provider.py      87     11    87%   41, 73, 80, 115-116, 198, 204, 210, 215, 224, 231
src/chapgent/core/permissions.py        14      0   100%
src/chapgent/core/providers.py          42      0   100%
src/chapgent/session/__init__.py         0      0   100%
src/chapgent/session/models.py          42      0   100%
src/chapgent/session/storage.py         49      2    96%   16, 78
src/chapgent/tools/__init__.py           0      0   100%
src/chapgent/tools/base.py              50      1    98%   63
src/chapgent/tools/filesystem.py        43      3    93%   35, 58, 104
src/chapgent/tools/registry.py          15      0   100%
src/chapgent/tools/shell.py             27      0   100%
src/chapgent/tui/__init__.py             0      0   100%
src/chapgent/tui/app.py                 87     11    87%   59, 71, 77, 110-111, 118, 133-134, 142, 152-153
src/chapgent/tui/widgets.py             60      0   100%
----------------------------------------------------------------
TOTAL                                761     32    96%
87 passed, 1 warning in 8.37s
